{"ast":null,"code":"import _createForOfIteratorHelper from\"D:/ReactJs/geektrust/admin-ui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"D:/ReactJs/geektrust/admin-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import UserData from'./components/UserData/UserData';import React,{useEffect,useState}from'react';// import Pagination from './components/Pagination/Pagination';\n// import SpecificUSerData from './components/SpecificUserData/SpecificUserData';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var URL='https://geektrust.s3-ap-southeast-1.amazonaws.com/adminui-problem/members.json';var _useState=useState([]),_useState2=_slicedToArray(_useState,2),fetchedData=_useState2[0],setUserDetails=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mainApiData=_useState4[0],setApiData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){fetchData();},[]);var fetchData=function fetchData(){fetch(URL).then(function(res){if(res.ok)return res.json();throw new Error('something went wrong while requesting posts');}).then(function(response){// console.log(response);\nsetUserDetails(response);setApiData(response);}).catch(function(error){return setError(error.message);});};var deleteHandler=function deleteHandler(id){var val=fetchedData.filter(function(item){return item.id!==id;});setApiData(val);setUserDetails(val);};var editedDataHandler=function editedDataHandler(data){console.log(data);var objIndex=mainApiData.findIndex(function(obj){return obj.id===data[0];});mainApiData[objIndex].name=data[1];mainApiData[objIndex].email=data[2];mainApiData[objIndex].role=data[3];setUserDetails(mainApiData);};var onSelectedDeleteHandler=function onSelectedDeleteHandler(idList){// console.log(idList);\nif(idList.length===0){alert('Please Select atleast 1 row.');}else{var afterDeleteList=fetchedData;var _iterator=_createForOfIteratorHelper(idList),_step;try{var _loop=function _loop(){var id=_step.value;var val=afterDeleteList.filter(function(item){return item.id!==id;});afterDeleteList=val;// console.log(afterDeleteList)\n};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}setUserDetails(afterDeleteList);setApiData(afterDeleteList);}};var filterUser=function filterUser(event){if(event.target.value.length===0){// fetchData();\nsetUserDetails(mainApiData);// setApiData(mainApiData);\n}else{var filter=mainApiData.filter(function(item){return item.name.toLowerCase().includes(event.target.value.toLowerCase())||item.email.toLowerCase().includes(event.target.value.toLowerCase())||item.role.toLowerCase().includes(event.target.value.toLowerCase());});setUserDetails(filter);}};if(error)return/*#__PURE__*/_jsx(\"h1\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"searchBox\",placeholder:\"Search by name, email or role\",onChange:filterUser}),/*#__PURE__*/_jsx(UserData,{items:fetchedData,ondeleteHandler:deleteHandler,pageLimit:5,dataLimit:10,selectedDeleteHandler:onSelectedDeleteHandler,editedData:editedDataHandler},Math.random()),fetchedData.length===0&&/*#__PURE__*/_jsx(\"h2\",{children:\"No Record Found\"})]});}export default App;","map":{"version":3,"sources":["D:/ReactJs/geektrust/admin-ui/src/App.js"],"names":["UserData","React","useEffect","useState","App","URL","fetchedData","setUserDetails","mainApiData","setApiData","error","setError","fetchData","fetch","then","res","ok","json","Error","response","catch","message","deleteHandler","id","val","filter","item","editedDataHandler","data","console","log","objIndex","findIndex","obj","name","email","role","onSelectedDeleteHandler","idList","length","alert","afterDeleteList","filterUser","event","target","value","toLowerCase","includes","Math","random"],"mappings":"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","sourcesContent":["import UserData from './components/UserData/UserData';\n\nimport React, { useEffect, useState } from 'react';\n// import Pagination from './components/Pagination/Pagination';\n// import SpecificUSerData from './components/SpecificUserData/SpecificUserData';\n\nfunction App() {\n\n\n  let URL = 'https://geektrust.s3-ap-southeast-1.amazonaws.com/adminui-problem/members.json';\n\n\n  const [fetchedData, setUserDetails] = useState([]);\n  const [mainApiData, setApiData] = useState([]);\n  const [error, setError] = useState('');\n\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  const fetchData = () => {\n    fetch(URL)\n      .then((res) => {\n        if (res.ok) return res.json();\n        throw new Error('something went wrong while requesting posts');\n      })\n      .then((response) => {\n        // console.log(response);\n        setUserDetails(response);\n        setApiData(response);\n      })\n      .catch((error) => setError(error.message));\n\n  }\n\n  const deleteHandler = (id) => {\n    const val = fetchedData.filter((item) => item.id !== id);\n\n    setApiData(val);\n    setUserDetails(val);\n  }\n\n  const editedDataHandler = (data) => {\n    console.log(data);\n    const objIndex = mainApiData.findIndex((obj => obj.id === data[0]));\n    mainApiData[objIndex].name = data[1];\n    mainApiData[objIndex].email = data[2];\n    mainApiData[objIndex].role = data[3];\n\n\n    setUserDetails(mainApiData);\n  }\n\n  const onSelectedDeleteHandler = (idList) => {\n    // console.log(idList);\n    if (idList.length === 0) {\n      alert('Please Select atleast 1 row.')\n    } else {\n      var afterDeleteList = fetchedData;\n      for (let id of idList) {\n\n        const val = afterDeleteList.filter((item) =>\n          item.id !== id\n        );\n\n        afterDeleteList = val;\n        // console.log(afterDeleteList)\n      }\n      setUserDetails(afterDeleteList);\n\n      setApiData(afterDeleteList);\n    }\n  }\n\n  const filterUser = (event) => {\n\n    if (event.target.value.length === 0) {\n      // fetchData();\n      setUserDetails(mainApiData);\n      // setApiData(mainApiData);\n    } else {\n\n      const filter = mainApiData.filter(item => (\n        item.name.toLowerCase().includes(event.target.value.toLowerCase()) ||\n        item.email.toLowerCase().includes(event.target.value.toLowerCase()) ||\n        item.role.toLowerCase().includes(event.target.value.toLowerCase())\n      ));\n      setUserDetails(filter);\n    }\n  }\n\n  if (error) return <h1>{error}</h1>;\n\n  return (\n    <div>\n      <input\n        type='text'\n        className='searchBox'\n        placeholder=\"Search by name, email or role\"\n        onChange={filterUser}\n      />\n\n      <UserData\n        key={Math.random()}\n        items={fetchedData}\n        ondeleteHandler={deleteHandler}\n        pageLimit={5}\n        dataLimit={10}\n        selectedDeleteHandler={onSelectedDeleteHandler}\n        editedData={editedDataHandler} >\n      </UserData>\n\n      {fetchedData.length === 0 && <h2 >No Record Found</h2>}\n\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}